(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{9888:(e,t,s)=>{Promise.resolve().then(s.bind(s,5379))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},5379:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(5155),l=s(2115),a=s(4565),n=s(3598),d=s(6046);let i=()=>{let[e,t]=(0,l.useState)(null),[s,i]=(0,l.useState)(!0),o=(0,d.useRouter)();(0,l.useEffect)(()=>{let e=(0,a.hg)(n.j,e=>{t(e),i(!1),console.log("Auth state changed:",e?e.email:"Logged out")});return()=>e()},[]);let c=async()=>{try{await (0,a.CI)(n.j),console.log("User signed out successfully"),o.push("/")}catch(e){console.error("Error signing out:",e)}};return s?(0,r.jsx)("nav",{className:"bg-[#a8d5ba] text-[#2c5f2d] p-4 shadow-lg",children:(0,r.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Task Manager"}),(0,r.jsx)("div",{className:"text-sm",children:"Loading user..."})]})}):(0,r.jsx)("nav",{className:"bg-[#a8d5ba] text-[#2c5f2d] p-4 shadow-md",children:(0,r.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-xl font-bold cursor-pointer hover:underline",onClick:()=>o.push("/"),children:"Study Buddy"}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"hidden sm:inline text-sm bg-[#e1f4e9] text-[#2c5f2d] px-3 py-1 rounded-full shadow-sm",children:e.email}),(0,r.jsx)("button",{onClick:()=>o.push("/StudyBuddy"),className:"bg-[#6cbf84] hover:bg-[#57a26e] text-white px-4 py-2 rounded transition-colors",children:"My Tasks"}),(0,r.jsx)("button",{onClick:c,className:"bg-[#f4978e] hover:bg-[#f08076] text-white px-4 py-2 rounded transition-colors",children:"Sign Out"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>o.push("/SignIn"),className:"bg-[#dce775] hover:bg-[#c0ca33] text-[#2c5f2d] px-4 py-2 rounded transition-colors",children:"Sign In"}),(0,r.jsx)("button",{onClick:()=>o.push("/signup"),className:"bg-[#ffd54f] hover:bg-[#ffca28] text-[#4e342e] px-4 py-2 rounded transition-colors",children:"Sign Up"})]})})]})})},o=function(e){let{children:t}=e,[s,i]=(0,l.useState)(!0),[o,c]=(0,l.useState)(!1),u=(0,d.useRouter)();return((0,l.useEffect)(()=>{let e=(0,a.hg)(n.j,e=>{e?(c(!0),console.log("RequireAuth: User is signed in:",e.uid)):(c(!1),console.log("RequireAuth: User is signed out. Redirecting to home page."),u.push("/")),i(!1)});return()=>{console.log("RequireAuth: Unsubscribing from auth state changes."),e()}},[u]),s)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):o?t:null},c=e=>{let{onAddTask:t}=e,[s,a]=(0,l.useState)(""),[n,d]=(0,l.useState)(""),[i,o]=(0,l.useState)("medium"),[c,u]=(0,l.useState)("");return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Add New Task"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(t({id:Date.now().toString(),title:s.trim(),description:n.trim(),priority:i,dueDate:c,completed:!1,createdAt:new Date().toISOString()}),a(""),d(""),o("medium"),u(""))},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title *"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:n,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task description",rows:"3"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,r.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,r.jsx)("input",{type:"date",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium",children:"Add Task"})]})]})},u=e=>{let{task:t,onToggleComplete:s,onDeleteTask:l,onEditTask:a}=e,n=e=>!!e&&new Date(e)<new Date&&!t.completed;return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 ".concat(t.completed?"border-green-500 bg-gray-50":n(t.dueDate)?"border-red-500":"border-blue-500"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>s(t.id),className:"mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium ".concat(t.completed?"line-through text-gray-500":"text-gray-900"),children:t.title}),t.description&&(0,r.jsx)("p",{className:"text-sm mt-1 ".concat(t.completed?"text-gray-400":"text-gray-600"),children:t.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded border ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(t.priority)),children:t.priority.toUpperCase()}),t.dueDate&&(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(n(t.dueDate)?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:["Due: ",(e=>e?new Date(e).toLocaleDateString():"")(t.dueDate)]}),n(t.dueDate)&&(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-red-500 text-white",children:"OVERDUE"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>a(t),className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>l(t.id),className:"text-red-600 hover:text-red-800 text-sm px-2 py-1 rounded hover:bg-red-50",children:"Delete"})]})]})})},m=e=>{let{tasks:t,onToggleComplete:s,onDeleteTask:a,onEditTask:n}=e,[d,i]=(0,l.useState)("all"),[o,c]=(0,l.useState)("created"),m=[...t.filter(e=>{switch(d){case"completed":return e.completed;case"pending":return!e.completed;case"overdue":return!e.completed&&e.dueDate&&new Date(e.dueDate)<new Date;default:return!0}})].sort((e,t)=>{switch(o){case"title":return e.title.localeCompare(t.title);case"priority":let s={high:3,medium:2,low:1};return s[t.priority]-s[e.priority];case"dueDate":if(!e.dueDate)return 1;if(!t.dueDate)return -1;return new Date(e.dueDate)-new Date(t.dueDate);default:return new Date(t.createdAt)-new Date(e.createdAt)}}),x=(()=>{let e=t.length,s=t.filter(e=>e.completed).length;return{total:e,completed:s,pending:e-s,overdue:t.filter(e=>!e.completed&&e.dueDate&&new Date(e.dueDate)<new Date).length}})();return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2 md:mb-0",children:"Your Tasks"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,r.jsxs)("select",{value:d,onChange:e=>i(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Tasks"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"completed",children:"Completed"}),(0,r.jsx)("option",{value:"overdue",children:"Overdue"})]}),(0,r.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"created",children:"Sort by Created"}),(0,r.jsx)("option",{value:"title",children:"Sort by Title"}),(0,r.jsx)("option",{value:"priority",children:"Sort by Priority"}),(0,r.jsx)("option",{value:"dueDate",children:"Sort by Due Date"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-3 rounded text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x.total}),(0,r.jsx)("div",{className:"text-sm text-blue-600",children:"Total"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-3 rounded text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:x.pending}),(0,r.jsx)("div",{className:"text-sm text-yellow-600",children:"Pending"})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-3 rounded text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:x.completed}),(0,r.jsx)("div",{className:"text-sm text-green-600",children:"Completed"})]}),(0,r.jsxs)("div",{className:"bg-red-50 p-3 rounded text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:x.overdue}),(0,r.jsx)("div",{className:"text-sm text-red-600",children:"Overdue"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:0===m.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"all"===d?"No tasks yet. Add your first task!":"No ".concat(d," tasks found.")}):m.map(e=>(0,r.jsx)(u,{task:e,onToggleComplete:s,onDeleteTask:a,onEditTask:n},e.id))})]})},x=e=>{let{task:t,isOpen:s,onClose:a,onSaveTask:n}=e,[d,i]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[u,m]=(0,l.useState)("medium"),[x,h]=(0,l.useState)("");return((0,l.useEffect)(()=>{t&&(i(t.title),c(t.description||""),m(t.priority),h(t.dueDate||""))},[t]),s)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Edit Task"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&(n({...t,title:d.trim(),description:o.trim(),priority:u,dueDate:x,updatedAt:new Date().toISOString()}),a())},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title *"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,r.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,r.jsx)("input",{type:"date",value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"}),(0,r.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})}):null};var h=s(7058);let g=()=>{let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=(0,a.hg)(n.j,e=>{if(r(e),e){let t=d(e.email);return()=>t()}t([])});return()=>e()},[]);let d=e=>{let s=(0,h.P)((0,h.rJ)(n.db,"tasks"),(0,h._M)("userEmail","==",e));return(0,h.aQ)(s,e=>{t(e.docs.map(e=>e.data()))})},i=async r=>{if(s)try{await (0,h.BN)((0,h.H9)(n.db,"tasks",r.id),{...r,userEmail:s.email}),t([...e,{...r,userEmail:s.email}])}catch(e){console.error("Error adding task to Firestore:",e)}},o=async s=>{let r=e.find(e=>e.id===s);if(!r)return;let l={...r,completed:!r.completed};try{await (0,h.mZ)((0,h.H9)(n.db,"tasks",s),{completed:l.completed});let r=e.map(e=>e.id===s?l:e);t(r)}catch(e){console.error("Error updating task in Firestore:",e)}};return{tasks:e,addTask:i,updateTask:async e=>{try{let t=(0,h.H9)(n.db,"tasks",e.id);await (0,h.mZ)(t,e)}catch(e){console.error("Error updating task in Firestore:",e)}},deleteTask:async e=>{try{await (0,h.kd)((0,h.H9)(n.db,"tasks",e))}catch(e){console.error("Error deleting task from Firestore:",e)}},toggleTaskComplete:o,user:s}};function b(){let[e,t]=(0,l.useState)(null),[s,a]=(0,l.useState)(!1),{tasks:n,addTask:d,updateTask:u,deleteTask:h,toggleTaskComplete:b,user:p}=g();return(0,r.jsx)(o,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-[#f4faee]",children:[" ",(0,r.jsx)(i,{}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-10",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto bg-white shadow-lg rounded-2xl p-8 border border-[#d9f1d1]",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-[#3b7b4f] mb-2",children:"Study Buddy"}),(0,r.jsxs)("p",{className:"text-[#789262]",children:["Welcome back, ",(0,r.jsx)("span",{className:"font-semibold",children:null==p?void 0:p.email}),"! Manage your tasks efficiently."]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(c,{onAddTask:d})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(m,{tasks:n,onToggleComplete:b,onDeleteTask:e=>{window.confirm("Are you sure you want to delete this task?")&&h(e)},onEditTask:e=>{t(e),a(!0)}})}),(0,r.jsx)(x,{task:e,isOpen:s,onClose:()=>{a(!1),t(null)},onSaveTask:e=>{u(e),t(null),a(!1)}})]})})]})})}},3598:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j:()=>i,y:()=>n});var r=s(9904),l=s(7058),a=s(4565);let n=(0,r.Wp)({apiKey:"AIzaSyAaMUvaVMDG5vpP0eFLUQPGvxkpZaPPjR4",authDomain:"mystudybuddyy-80243.firebaseapp.com",projectId:"mystudybuddyy-80243",storageBucket:"mystudybuddyy-80243.firebasestorage.app",messagingSenderId:"221279131379",appId:"1:221279131379:web:ab31a8732c70be0a90c986",measurementId:"G-CWZMGMRVWC"}),d=(0,l.aU)(n),i=(0,a.xI)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,146,861,441,517,358],()=>t(9888)),_N_E=e.O()}]);